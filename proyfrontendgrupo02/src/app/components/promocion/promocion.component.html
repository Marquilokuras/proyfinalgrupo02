<div class="container-fluid">
    <h2 class="mt-3">Gestion de Promociones</h2>

    <button type="button" class="btn btn-primary" (click)="nuevoPromocion()"  *ngIf="tipoLogged() == 'administrador' || tipoLogged() == 'gestor'">Agregar Promocion</button>

    <div class="table-responsive">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th scope="col-auto">Promocion</th>
                    <th scope="col-auto">Bebidas incluidas</th>
                    
                    <th scope="col-auto">Opciones</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let promo of listaPromocion">
                    <td class="col-auto">
                        <p style="font-weight: bold; font-size: 16px;">Nombre: {{promo.nombrePromocion}}</p>
                        <p style="color: #ff0000;">Precio de la promo: {{promo.totalPrecioPromocion}}</p>
                        <p style="text-decoration: line-through;">Precio sin descuento: {{promo.totalPrecioBebidasSinDescuento}}</p>
                        <p style="font-style: italic;">Descuento: {{promo.descuento}}</p>
                        <p>Valido hasta: {{promo.fechaPromocion | date:'dd-MM-yyyy': 'utc' }}</p>
                        <button *ngIf="promo.disponibilidadPromocion==true" (click)="cambiarEstadoPromocion(promo)" class="btn btn-success btn-sm rounded-pill">
                            Disponible
                          </button>
                          <button *ngIf="promo.disponibilidadPromocion==false" (click)="cambiarEstadoPromocion(promo)" class="btn btn-danger btn-sm rounded-pill">
                            No Disponible
                          </button>
                      </td>

                  

                    <td class="col-auto">
                        <div class="d-flex flex-wrap">
                            <div class="mr-2" style="max-width: 150px;" *ngFor="let bebida of promo.bebidas">
                            <div class="card h-100 card-color">
                                <img [src]="bebida.imagenBebida" class="card-img-top img-fluid" alt="Imagen bebida">
                                <div class="card-body">
                                <h5 class="card-title title-color">{{bebida.nombreBebida}}</h5>
                                <p class="card-text price-color"><strong>Precio:</strong> $ {{bebida.precioBebida}}</p>
                                </div>
                            </div>
                            </div>
                        </div>
                    </td>


                    <td class="col-1">
                        <div class="d-flex">
                          <button type="button" class="btn btn-primary btn-lg btn-block me-2 mt-5" (click)="actualizarPromocion(promo)">
                            <i class="fa-solid fa-pencil"></i>
                          </button>
                          <button type="button" class="btn btn-danger btn-lg btn-block me-2 mt-5" (click)="eliminarPromocion(promo)">
                            <i class="fa-sharp fa-solid fa-trash"></i>
                          </button>
                        </div>
                    </td>

                </tr>
            </tbody>
        </table>
    </div>
</div>
